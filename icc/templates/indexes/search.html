{% extends 'base.html' %}

{% block content %}
    <h1>Search Results</h1>
    <h2>{{ line_total }} lines</h2>
    <div id='content'>
        {% for line in lines %}
            <h3>
                Line
                <a href='{{ line.url }}#{{ line.line_num }}'>
                    {{ line.num }}
                </a>
                of
                <a href='{{ url_for('main.text', text_url=line.text.url) }}'>
                    {{ line.text.title }}
                </a>
                by
                {% set writers = line.edition.writers['author'] %}
                {% include "includes/_writers_list.html" %}
            </h3>
            {% for l in line.context %}
                <a href='{{ url_for('main.line_annotations',
                    text_url=l.edition.text.url_name,
                    edition_num=l.edition.num, line_num=l.num) }}'>
                    <line class='{{ l.primary.enum }}' id='{{ l.num }}'>
                        <div{% if l == line %} class='highlight'{% endif %}>
                            <span{% if l == line %} class='linenum'{% else %}
                                class='hidden_linenum'{% endif %}>{{ l.num
                                }}</span>
                                {{ l.line|safe }}
                            <span class="body_annotation">
                                &times; {{ l.annotations.count() }}
                            </span>
                        </div>
                    </line>
                </a>
            {% endfor %}
            <hr>
        {% endfor %}
    </div>
{% endblock %}
