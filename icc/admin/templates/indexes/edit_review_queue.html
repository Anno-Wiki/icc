{% extends "base.html" %}

{% block content %}

{% set header = [
    ('voted',       'Voted? &#9662;',       'voted_invert',     'Voted? &#9652;'),
    ('id',          'Annotation &#9662;',   'id_invert',        'Annotation &#9652;'),
    ('edit_num',    'Edit # &#9662;',       'edit_num_invert',  'Edit # &#9652;'),
    ('editor',      'Editor &#9662;',       'editor_invert',    'Editor &#9652;'),
    ('time',        'Time &#9662;',         'time_invert',      'Time &#9652;'),
    ('reason',      'Reason &#9662;',       'reason_invert',    'Reason &#9652;'),
    ]
%}
<h1>Pending Edit Review Queue</h1>
<table class="inbox">
    {% include "includes/_table_header.html" %}
    {% if edits %}
        {% for edit in edits %}
            {% set vote = current_user.get_vote(edit) %}
            <tr{% if vote %} class="read"{% else %} class="unread"{% endif %}>
                <td>
                    {# voted #}
                    <a href="{{ url_for("admin.review_edit",
                        annotation_id=edit.annotation.id, edit_id=edit.id)
                        }}">{% if vote %}&#10003;{% else %}review{% endif %}</a>
                </td>
                <td>
                    {# annotation id #}
                    <a href="{{ url_for("main.annotation",
                        annotation_id=edit.annotation.id) }}">[{{
                        edit.annotation.id }}]</a>
                </td>
                <td>
                    {# edit number #}
                    <a href="{{ url_for("admin.review_edit",
                        annotation_id=edit.annotation.id, edit_id=edit.id)
                        }}">#{{ edit.num }}</a>
                </td>
                <td>
                    {# editor #}
                    <a href="{{ url_for("user.profile", user_id=edit.editor_id)
                        }}">{{ edit.editor.displayname }}</a>
                </td>
                <td>
                    {# timestamp #}
                    {{ edit.timestamp }}
                </td>
                <td>
                    {# reason #}
                    {{ edit.reason }}
                </td>
            </tr>
        {% endfor %}
    {% else %}
        <tr class="read">
            <td colspan=6>
                This queue has been cleared.
            </td>
        </tr>
    {% endif %}
</table>

{% endblock %}
