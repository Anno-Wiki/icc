{% include "includes/js/_toc_toggle.js" %}

<table class="toc">
    <thead>
        <tr>
            <th align="left" class="section disappear-3">Section</th>
            <th class="content">Title</th>
            <th align="right" class="disappear-1">Line</th>
        </tr>
    </thead>
    <tbody>
        {% for section in hierarchy %}
            {% set linkbase = section.primary.precedence > 1 or deepest == 1 %}
            <tr class="lvl{{ section.primary.precedence }} {% for attr in section.attrs.values() %}{{ attr.precedence }}-{{ attr.num }} {% endfor %}">
                <td align="left" class="disappear-3 section"{% if linkbase %} onclick="location.href='{{ section.url }}';"{% endif %}>
                    {% if linkbase %}<a href="{{ section.url }}">{% endif %}
                        {{ section.primary.display }} {{ section.primary.num }}
                    {% if linkbase %}</a>{% endif %}
                </td>
                <td align="center" class="content"{% if linkbase %} onclick="location.href='{{ section.url }}';"{% endif %}>
                    {% if linkbase %}
                        <a href="{{ section.url }}">{{ section.line }}</a>
                    {% else %}
                        {{ section.line }}
                    {% endif %}
                </td>
                <td align="right" class="lineno disappear-1"{% if linkbase %} onclick="location.href='{{ section.url }}';"{% endif %}>
                    {% if linkbase %}
                        <a href="{{ section.url }}">{{ section.num }}</a>
                    {% else %}
                        {{ section.num }}
                    {% endif %}
                </td>
                {% if section.primary.precedence < deepest %}
                    <td class="collapse-td">
                        <a class="collapse" onclick="toggle(this);">[ + ]</a>
                    </td>
                {% endif %}
            </tr>
        {% endfor %}
    </tbody>
</table>
