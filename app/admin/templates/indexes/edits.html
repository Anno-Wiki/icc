{% extends "base.html" %}

{% block content %}

<h1>Pending Edit Review Queue</h1>
<table class="inbox">
    <tr class="header">
        {% if sort == "voted" %}
            <td class="highlight">
                <a href="{{ url_for("admin.edit_review_queue", sort="voted_invert",
                    page=page) }}">
                    &#9662;
                </a>
            </td>
        {% elif sort =="voted_invert" %}
            <td class="highlight">
                <a href="{{ url_for("admin.edit_review_queue", sort="voted",
                    page=page) }}">
                    &#9652;
                </a>
            </td>
        {% else %}
            <td>
                <a href="{{ url_for("admin.edit_review_queue", sort="voted",
                    page=page) }}">
                    &nbsp;
                </a>
            </td>
        {% endif %}

        {% if sort == "id" %}
            <td class="highlight">
                <a href="{{ url_for("admin.edit_review_queue", sort="id_invert",
                    page=page) }}">
                    Annotation &#9662;
                </a>
            </td>
        {% elif sort =="id_invert" %}
            <td class="highlight">
                <a href="{{ url_for("admin.edit_review_queue",
                    sort="id", page=page) }}">
                    Annotation &#9652;
                </a>
            </td>
        {% else %}
            <td>
                <a href="{{ url_for("admin.edit_review_queue", sort="id", page=page)
                    }}">
                    Annotation
                </a>
            </td>
        {% endif %}

        {% if sort == "edit_num" %}
            <td class="highlight">
                <a href="{{ url_for("admin.edit_review_queue", sort="edit_num_invert",
                    page=page) }}">
                    Edit Number &#9662;
                </a>
            </td>
        {% elif sort =="id_invert" %}
            <td class="highlight">
                <a href="{{ url_for("admin.edit_review_queue", sort="edit_num",
                    page=page) }}">
                    Edit Number &#9652;
                </a>
            </td>
        {% else %}
            <td>
                <a href="{{ url_for("admin.edit_review_queue", sort="edit_num",
                    page=page) }}">
                    Edit Number
                </a>
            </td>
        {% endif %}

        {% if sort == "editor" %}
            <td class="highlight">
                <a href="{{ url_for("admin.edit_review_queue", sort="editor_invert",
                    page=page) }}">
                    Editor &#9662;
                </a>
            </td>
        {% elif sort =="editor_invert" %}
            <td class="highlight">
                <a href="{{ url_for("admin.edit_review_queue", sort="editor",
                    page=page) }}">
                    Editor &#9652;
                </a>
            </td>
        {% else %}
            <td>
                <a href="{{ url_for("admin.edit_review_queue", sort="editor",
                    page=page) }}">
                    Editor
                </a>
            </td>
        {% endif %}

        {% if sort == "time" %}
            <td class="highlight">
                <a href="{{ url_for("admin.edit_review_queue", sort="time_invert",
                    page=page) }}">
                    Time &#9662;
                </a>
            </td>
        {% elif sort =="time_invert" %}
            <td class="highlight">
                <a href="{{ url_for("admin.edit_review_queue", sort="time", page=page)
                    }}">
                    Time &#9652;
                </a>
            </td>
        {% else %}
            <td>
                <a href="{{ url_for("admin.edit_review_queue", sort="time", page=page) }}">
                    Time
                </a>
            </td>
        {% endif %}

        {% if sort == "reason" %}
            <td class="highlight">
                <a href="{{ url_for("admin.edit_review_queue", sort="reason_invert",
                    page=page) }}">
                    Reason &#9662;
                </a>
            </td>
        {% elif sort =="reason_invert" %}
            <td class="highlight">
                <a href="{{ url_for("admin.edit_review_queue", sort="reason",
                    page=page) }}">
                    Reason &#9652;
                </a>
            </td>
        {% else %}
            <td>
                <a href="{{ url_for("admin.edit_review_queue", sort="reason",
                    page=page) }}">
                    Reason
                </a>
            </td>
        {% endif %}
    </tr>

    {% if edits %}
        {% for edit in edits %}
            {% if edit not in votes %}
                <tr class="unread">
                    <td>
                        <a href="{{ url_for("admin.review_edit", edit_id=edit.id) }}">
                            view
                        </a>
                    </td>
                    <td>
                        <a href="{{ url_for("annotation",
                            annotation_id=edit.annotation_id) }}">
                            [{{ edit.annotation_id }}]
                        </a>
                    </td>
                    <td>
                        {{ edit.edit_num }}
                    </td>
                    <td>
                        <a href="{{ url_for("user", user_id=edit.editor_id) }}">
                            {{ edit.editor.displayname }}
                        </a>
                    </td>
                    <td>
                        {{ edit.timestamp }}
                    </td>
                    <td>
                        {{ edit.edit_reason }}
                    </td>
                </tr>
            {% else %}
                <tr class="read">
                    <td>
                        {% if current_user.get_edit_vote(edit).is_up() %}
                        &#10003;
                        {% else %}
                        &#10007;
                        {% endif %}
                    </td>
                    <td>
                        <a href="{{ url_for("annotation",
                            annotation_id=edit.annotation_id) }}">
                            [{{ edit.annotation_id }}]
                        </a>
                    </td>
                    <td>
                        {{ edit.edit_num }}
                    </td>
                    <td>
                        <a href="{{ url_for("user", user_id=edit.editor_id) }}">
                            {{ edit.editor.displayname }}
                        </a>
                    </td>
                    <td>
                        {{ edit.timestamp }}
                    </td>
                    <td>
                        {{ edit.edit_reason }}
                    </td>
                </tr>
            {% endif %}
        {% endfor %}
    {% else %}
        <tr class="read">
            <td colspan=6>
                This queue has been cleared.
            </td>
        </tr>
    {% endif %}
</table>

{% endblock %}
