{% extends "base.html" %}

{% block content %}
    <h1>{{ book_request.title|safe }}</h1>
    <h2>by {{ book_request.author|safe }}</h2>
    <div class="weight">{{ book_request.weight }}
        {% if current_user.is_authenticated and
                current_user.already_voted_book_request(book_request) and
                current_user.get_book_request_vote(book_request).is_up() %}
            <a href="{{ url_for("upvote_book_request",
                    book_request_id=book_request.id,
                    next=url_for("view_book_request",
                    book_request_id=book_request.id)) }}" class="voted">
                up
            </a>
        {% else %}
            <a href="{{ url_for("upvote_book_request",
                   book_request_id=book_request.id,
                   next=url_for("view_book_request",
                   book_request_id=book_request.id)) }}" class="notvoted">
                up
            </a>
        {% endif %}

        /

        {% if current_user.is_authenticated and
                current_user.already_voted_book_request(book_request) and
                not current_user.get_book_request_vote(book_request).is_up() %}
            <a href="{{ url_for("downvote_book_request",
                    book_request_id=book_request.id,
                    next=url_for("view_book_request",
                    book_request_id=book_request.id)) }}" }}" class="voted">
                down
            </a>
        {% else %}
            <a href="{{ url_for("downvote_book_request",
                    book_request_id=book_request.id,
                    next=url_for("view_book_request",
                    book_request_id=book_request.id)) }}" class="notvoted">
                down
            </a>
        {% endif %}
    </div>

    {% if current_user.is_authenticated and
            current_user.has_right("edit_book_requests") %}
        <a href="{{ url_for("edit_book_request",
                book_request_id=book_request.id) }}">Edit
            this page
        </a>

        <br><br>
    {% endif %}

    <a href="{{ book_request.wikipedia }}">Link to Wikipedia page</a>
    <br>
    <a href="{{ book_request.gutenberg }}">Link to Project Gutenberg page</a>
    <br>

    <h3>Description</h3>
    <div id="description">
        {{ book_request.description|markdown }}
    </div>

    <h3>Notes</h3>
    <div id="notes">
        {{ book_request.notes|markdown }}
    </div>

{% endblock %}
