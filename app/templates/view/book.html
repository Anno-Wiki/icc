{% extends "base.html" %}

{% block content %}
<h1>{{ book.title|safe }}</h1>
<h2>by
    <a href="{{ url_for("author", name=book.author.url) }}">
        {{ book.author.name|safe }}
    </a>
</h2>

<div id="summary">
{{ book.summary|markdown }}
</div>

<!--------------table of contents------>
<table class="table_of_contents">
    <tr class="toc_header">
        <th align="left">
            Section
        </th>
        <th align="right">
            Line
        </th>
    </tr>
    {% for section in hierarchy %}
{% if section.kind.kind == 'bk' %}
    <tr class="book_contents">
        <td align="left">
            <a href="{{ section.get_url() }}">
                Book {{ section.bk_num }}: {{ section.line }}
            </a>
        </th>
        <td align="right">
            <a href="{{ section.get_url() }}">
                {{ section.l_num }}
            </a>
        </th>

{% elif section.kind.kind == 'pt' %}
    <tr class="part_contents">
        <td align="left">
            <a href="{{ section.get_url() }}">
                Part {{ section.pt_num }}: {{ section.line }}
            </a>
        <td align="right">
            <a href="{{ section.get_url() }}">
                {{ section.l_num }}
            </a>
        </th>
{% elif section.kind.kind == 'ch' %}
    <tr class="chapter_contents">
        <td align="left">
            <a href="{{ section.get_url() }}">
                Chapter {{ section.ch_num }}: {{ section.line }}
            </a>
        </td>
        <td align="right">
            <a href="{{ section.get_url() }}">
                {{ section.l_num }}
            </a>
        </td>
    </tr>
{% endif %}
    {% endfor %}

</table>
{% endblock %}
