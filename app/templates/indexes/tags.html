{% extends "base.html" %}

{% block content %}
<h1>Tags</h1>
{% if current_user.is_authenticated and current_user.has_right("create_tags") %}
    <h4>You have the appropriate permissions to <a href="{{
        url_for("create_tag") }}">create a tag</a>.</h4>
{% endif %}
<h4>Don't see what you're looking for? Try requesting it.</h4>
<div class="index">
{% for tag in tags %}
<div class="card">
    <a href="{{ url_for("tag", tag=tag.tag) }}"><tag>{{ tag.tag }}</tag></a>
    &times; {{ tag.annotations.count() }}
    <br>
    {% if len(tag.description) > 127 %}
    <div class="card_text_cutoff">
    {% else %}
    <div>
    {% endif %}
        {{ tag.description[:127]|markdown }}
    </div>
    <a href="{{ url_for("tag", tag=tag.tag) }}">View More</a>
</div>
{% endfor %}
</div>

{% if prev_url %}
<a href="{{ prev_url }}">Next Page</a>
{% endif %}
{% if next_url %}
<a href="{{ next_url }}">Previous Page</a>
{% endif %}

{% endblock %}
