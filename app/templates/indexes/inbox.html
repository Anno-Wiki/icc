{% extends "base.html" %}

{% block content %}
    {% if current_user.new_notifications %}
        <a href="{{ url_for("mark_all_read") }}">mark all read</a>
    {% endif %}
    <table class="inbox">
        <tr class="header">
            {% if sort == "read" %}
                <td class="highlight">
                    <a href="{{ sorts["read_invert"] }}">
                        Read
                        &#x25be;
                    </a>
                </td>
            {% elif sort == "read_invert" %}
                <td class="highlight">
                    <a href="{{ sorts["read"] }}">
                        Read
                        &#x25b4;
                    </a>
                </td>
            {% else %}
                <td>
                    <a href="{{ url_for("inbox", sort="read", page=page) }}">
                        Read
                    </a>
                </td>
            {% endif %}

            {% if sort == "type" %}
                <td class="highlight">
                    <a href="{{ sorts["type_invert"] }}">
                        Type
                        &#x25be;
                    </a>
                </td>
            {% elif sort == "type_invert" %}
                <td class="highlight">
                    <a href="{{ sorts["type"] }}">
                        Type
                        &#x25b4;
                    </a>
                </td>
            {% else %}
                <td>
                    <a href="{{ url_for("inbox", sort="type", page=page) }}">
                        Type
                    </a>
                </td>
            {% endif %}

            {% if sort == "time" %}
                <td class="highlight">
                    <a href="{{ sorts["time_invert"] }}">
                        Time
                        &#x25be;
                    </a>
                </td>
            {% elif sort == "time_invert" %}
                <td class="highlight">
                    <a href="{{ sorts["time"] }}">
                        Time
                        &#x25b4;
                    </a>
                </td>
            {% else %}
                <td>
                    <a href="{{ url_for("inbox", sort="time", page=page) }}">
                        Time
                    </a>
                </td>
            {% endif %}

            {% if sort == "information" %}
                <td class="highlight">
                    <a href="{{ sorts["information_invert"] }}">
                        More information
                        &#x25be;
                    </a>
                </td>
            {% elif sort == "information_invert" %}
                <td class="highlight">
                    <a href="{{ sorts["information"] }}">
                        More information
                        &#x25b4;
                    </a>
                </td>
            {% else %}
                <td>
                    <a href="{{ url_for("inbox", sort="information", page=page) }}">
                        More information
                    </a>
                </td>
            {% endif %}
        </tr>
        {% if not notifications %}
            <tr>
                <td colspan=5>
                    You have no notifications yet.
                </td>
            </tr>
        {% endif %}
        {% for notification in notifications %}
            {% if notification.seen %}
                <tr class="read">
                    <td>
                        <a href="{{ url_for("mark_notification", event_id=notification.id) }}">
                            &#x2713;
                        </a>
                    </td>
                    <td>
                        <a href="{{ notification.link }}">
                            {{ notification.notification.description }}
                        </a>
                    </td>
                    <td>
                        <a href="{{ notification.link }}">
                            {{ notification.time }}
                        </a>
                    </td>
                    <td>
                        <a href="{{ notification.link }}">
                            {{ notification.information }}
                        </a>
                    </td>
                </tr>
            {% else %}
                <tr class="unread">
                    <td>
                        <a href="{{ url_for("mark_notification", event_id=notification.id) }}">
                            x
                        </a>
                    </td>
                    <td>
                        <a href="{{ notification.link }}">
                            {{ notification.notification.description }}
                        </a>
                    </td>
                    <td>
                        <a href="{{ notification.link }}">
                            {{ notification.time }}
                        </a>
                    </td>
                    <td>
                        <a href="{{ notification.link }}">
                            {{ notification.information }}
                        </a>
                    </td>
                </tr>
            {% endif %}
        {% endfor %}
    </table>
{% endblock %}
